{"remainingRequest":"/var/www/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/src/views/View.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/src/views/View.vue","mtime":1581518264825},{"path":"/var/www/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgoKZXhwb3J0IGRlZmF1bHQgewoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgZmllbGRzOlt7IGtleTonaWQnLGxhYmVsOidTTk8nIH0sCiAgICAgICAgICAgICAgeyBrZXk6J3RpdGxlJyxsYWJlbDonVElUTEUnIH0sCiAgICAgICAgICAgICAgeyBrZXk6J2NyZWF0ZWRfYXQnLGxhYmVsOiAnUE9TVEVEX0FUJyB9LAogICAgICAgICAgICAgIHsga2V5OidlZGl0JyxsYWJlbDonRURJVCcgfSwKICAgICAgICAgICAgICB7IGtleTonZGVsZXRlJyxsYWJlbDonREVMRVRFJ30KICAgICAgICAgICAgIF0sCiAgICAgIHNpbmdsZTogbnVsbCwKICAgICAgdGl0bGU6ICcnLAogICAgICBjb250ZW50OiAnJywKICAgICAgdW5pazonJywKICAgICAgdXJsOidodHRwOi8vbG9jYWxob3N0Ojk5OTkvYXBpL3BhZ2luYXRlRGF0YScsCiAgICAgIHBhZ2luYXRpb246IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJykpewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj0nLyc7CiAgICB9CiAgICB0aGlzLmdldFVzZXJzKCkKCiAgfSwKCiAgCiAgbWV0aG9kczogewogIGdldFVzZXJzKCl7CiAgICAgdmFyIGhlYWRlcnMgPSB7IAogICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICBBdXRob3JpemF0aW9uIDogJ0JlYXJlciAnKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJykKICAgIH0KCiAgICBsZXQgJHRoaXMgPSB0aGlzOwoKICAgIGF4aW9zCiAgICAgIC5nZXQodGhpcy51cmwsIHsgaGVhZGVyczogaGVhZGVycyB9KQogICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSksCiAgICAgICAgKHRoaXMuaXRlbXMgPSByZXNwb25zZS5kYXRhLmRhdGEpCiAgICAgICAgJHRoaXMubWFrZVBhZ2luYXRpb24ocmVzcG9uc2UuZGF0YSkKICAgICAgfSkKICAgIH0sIAoKICAgIHNob3coZGF0YSl7CiAgICAgICAgdGhpcy51bmlrPSBkYXRhLmlkOwogICAgICAgIHRoaXMudGl0bGUgPSBkYXRhLnRpdGxlOwogICAgICAgIHRoaXMuY29udGVudCA9IGRhdGEuY29udGVudDsKICAgICAgICAKICAgIH0sCgogICAgaGlkZSgpIHsKICAgICAgdGhpcy4kbW9kYWwuaGlkZSgibWQiKTsKICAgIH0sCgogICAgZGVsZXRlcG9zdChpZCl7CiAgICBjb25zdCBoZWFkZXJzID0geyAKICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICBBdXRob3JpemF0aW9uIDogJ0JlYXJlciAnKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJykKICAgIH0KICAgIGNvbnN0IGRhdGEgPSB7ICdpZCc6IGlkfQoKICAgICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo5OTk5L2FwaS9kZWxldGVwb3N0IixkYXRhLCB7aGVhZGVyczogaGVhZGVyc30pCiAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLmdldFVzZXJzKCk7CiAgICAgICAgIH0pCiAgICB9LAoKCiAgICB1cGRhdGUoKXsKICAgICAgICBjb25zdCBoZWFkZXJzID0geyAKICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgIEF1dGhvcml6YXRpb24gOiAnQmVhcmVyICcrIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKQogICAgICAgIH0KICAgICAgICBjb25zdCBkYXRhID0geyAgICAgICAgICAgICAKICAgICAgICAgICAgaWQgOiB0aGlzLnVuaWssCiAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLAogICAgICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQKICAgICAgICB9CiAgICAgIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6OTk5OS9hcGkvdXBkYXRlcG9zdCIsZGF0YSwge2hlYWRlcnM6IGhlYWRlcnN9KQogICAgICAudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgIHRoaXMuZ2V0VXNlcnMoKTsKICAgICAgfSkKICAgICAgLmNhdGNoKGVycm9yPT57CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0pCiAgICB9LAoKICAgIG1ha2VQYWdpbmF0aW9uKGRhdGEpewogICAgICBsZXQgcGFnaW5hdGlvbiA9IHsKICAgICAgICBjdXJyZW50X3BhZ2UgOiBkYXRhLmN1cnJlbnRfcGFnZSwKICAgICAgICBsYXN0X3BhZ2UgOiBkYXRhLmxhc3RfcGFnZSwKICAgICAgICBuZXh0X3BhZ2VfdXJsIDogZGF0YS5uZXh0X3BhZ2VfdXJsLAogICAgICAgIHByZXZfcGFnZV91cmwgOiBkYXRhLnByZXZfcGFnZV91cmwKICAgICAgfQogICAgICB0aGlzLnBhZ2luYXRpb24gPSBwYWdpbmF0aW9uOwogICAgfSwKCiAgICBmZXRjaFBhZ2luYXRlVXNlcnModXJsKXsKICAgICAgdGhpcy51cmwgPSB1cmwKICAgICAgdGhpcy5nZXRVc2VycygpCiAgICB9CgogIH0KCn07CiAK"},{"version":3,"sources":["View.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA","file":"View.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\" >\n    <h2>View Posts</h2>\n\n     <div class=\"pagination\">\n       <b-button variant=\"secondary\" size=\"sm\" @click=\"fetchPaginateUsers(pagination.prev_page_url)\" :disabled=\"!pagination.prev_page_url\">&laquo; Previous</b-button>\n       <span> Page {{ pagination.current_page }} of {{ pagination.last_page }} </span>\n       <b-button variant=\"secondary\" size=\"sm\" @click=\"fetchPaginateUsers(pagination.next_page_url)\" :disabled=\"!pagination.next_page_url\"> Next &raquo;</b-button>\n     </div>\n    </hr>\n      <b-table \n         id= \"my-table\"\n         sticky-header \n         small \n         show-empty \n         stacked=\"md\" \n         :fields=\"fields\" \n         :items=\"items\" \n         head-variant=\"light\"\n\n      >\n        <template v-slot:cell(id)=\"data\">\n           {{ data.index+1 }}\n        </template>\n     \n        <template v-slot:cell(edit)=\"row\">\n           <b-button size=\"sm\" @click=\"show(row.item); $bvModal.show('editModal')\" variant=\"warning\">Edit</b-button>\n        </template>\n\n        <template v-slot:cell(delete)=\"row\">\n           <b-button size=\"sm\" @click=\"deletepost(row.item.id)\" variant=\"danger\">Delete</b-button>\n        </template>\n      </b-table>\n\n\n\n   <!---Modal--->   \n  <b-modal id=\"editModal\">\n    <template v-slot:modal-title>\n      EDIT POST\n    </template>\n      <b-form>\n      <!---hidden input--->\n          <b-form-input\n           type=\"text\"\n           v-model=\"unik\"\n           hidden\n          ></b-form-input>\n      <!---end--->\n        <b-form-group\n          id=\"input-group-1\"\n          label=\"TITLE\"\n        >\n          <b-form-input\n           id=\"input-1\"\n           type=\"text\"\n           v-model=\"title\"\n           required\n          ></b-form-input>\n\n        </b-form-group>\n\n          <b-form-group\n          id=\"input-group-2\"\n          label=\"CONTENT\"\n        >\n          <b-form-textarea\n           id=\"input-2\"\n           type=\"text\"\n           v-model=\"content\"\n           required\n          ></b-form-textarea>\n         \n        </b-form-group>\n      </b-form>\n      <template v-slot:modal-footer>\n        <b-button variant=\"secondary\" @click=\"$bvModal.hide('editModal')\">Close</b-button>\n        <b-button variant=\"success\"  @click=\"update(); $bvModal.hide('editModal');\">Save Changes</b-button>\n      </template>\n  </b-modal>\n  </div>\n  \n</template>\n\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.18/vue.min.js\"></script>\n<script type=\"text/javascript\">\nimport axios from \"axios\";\n\n\nexport default {\n\n  data() {\n    return {\n\n      items: [],\n      fields:[{ key:'id',label:'SNO' },\n              { key:'title',label:'TITLE' },\n              { key:'created_at',label: 'POSTED_AT' },\n              { key:'edit',label:'EDIT' },\n              { key:'delete',label:'DELETE'}\n             ],\n      single: null,\n      title: '',\n      content: '',\n      unik:'',\n      url:'http://localhost:9999/api/paginateData',\n      pagination: []\n    };\n  },\n  mounted() {\n    if(!localStorage.getItem('access_token')){\n      window.location.href='/';\n    }\n    this.getUsers()\n\n  },\n\n  \n  methods: {\n  getUsers(){\n     var headers = { \n      'Accept': 'application/json',\n      Authorization : 'Bearer '+ localStorage.getItem('access_token')\n    }\n\n    let $this = this;\n\n    axios\n      .get(this.url, { headers: headers })\n      .then(response => {\n        console.log(response.data),\n        (this.items = response.data.data)\n        $this.makePagination(response.data)\n      })\n    }, \n\n    show(data){\n        this.unik= data.id;\n        this.title = data.title;\n        this.content = data.content;\n        \n    },\n\n    hide() {\n      this.$modal.hide(\"md\");\n    },\n\n    deletepost(id){\n    const headers = { \n        'Accept': 'application/json',\n         Authorization : 'Bearer '+ localStorage.getItem('access_token')\n    }\n    const data = { 'id': id}\n\n         axios.post(\"http://localhost:9999/api/deletepost\",data, {headers: headers})\n         .then(response => {\n              this.getUsers();\n         })\n    },\n\n\n    update(){\n        const headers = { \n         'Accept': 'application/json',\n          Authorization : 'Bearer '+ localStorage.getItem('access_token')\n        }\n        const data = {             \n            id : this.unik,\n            title: this.title,\n            content: this.content\n        }\n      axios.post(\"http://localhost:9999/api/updatepost\",data, {headers: headers})\n      .then(response => {\n\n        this.getUsers();\n      })\n      .catch(error=>{\n        console.log(error)\n      })\n    },\n\n    makePagination(data){\n      let pagination = {\n        current_page : data.current_page,\n        last_page : data.last_page,\n        next_page_url : data.next_page_url,\n        prev_page_url : data.prev_page_url\n      }\n      this.pagination = pagination;\n    },\n\n    fetchPaginateUsers(url){\n      this.url = url\n      this.getUsers()\n    }\n\n  }\n\n};\n \n</script>\n"]}]}